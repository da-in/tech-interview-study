# OSI 7계층
OSI 7 계층은 네트워크에서 통신이 일어나는 과정을 7단계로 나눈 것을 말하며, 국제표준화기구(ISO, International Organization for Standardization)에서 네트워크 간의 호환을 위해 OSI 7 계층이라는 표준 네트워크 모델을 만들었다. 개방형 시스템 상호 연결 모델(OSI)의 표준이다.

초기 여러 정보 통신 업체 장비들은 자신의 업체 장비들끼리만 연결이 되어 호환성이 없었다. 모든 시스템들의 상호 연결에 있어 문제없도록 **표준** 을 정한것이 OSI 7계층이고, 실제 인터넷에서 사용되는 TCP/IP 4계층\*은 OSI 참조 모델을 기반으로 상업적이고 실무적으로 이용될 수 있도록 단순화 한 것이다.

_\* TCP/IP 4계층: L1 네트워크 액세스 계층(물리 계층 + 데이터링크 계층), L2 인터넷 계층(네트워크 계층), L3(전송 계층), L4 응용 계층(세션 계층 + 표현 계층 + 응용계층)_

* 특징
  - 통신이 일어나는 과정을 단계별로 파악할 수 있다.
  - 통신 과정 중에 특정한 곳에 이상이 생긴 경우, 다른 단계의 장비 및 소프트웨어 등을 건드리지 않고 통신 장애를 일으킨 단계에서 해결할 수 있다.
  
<img height="500px" alt="OSI&TCP/IP" src="https://user-images.githubusercontent.com/70997596/208899170-46385a19-003d-4c50-a2bf-97b96bfcea1a.png">
<img height="500px" alt="OSI" src="https://velog.velcdn.com/images/genius_jihyepark/post/1da3b406-d521-46c3-b2b4-50edc6473dae/image.png">

<br>

## 작동 원리

- **데이터 전송 시**
  - 7계층에서 1계층으로 각각의 층마다 데이터를 인식할 수 있도록 하는 헤더를 붙이며 이를 캡슐화 라고 한다.
  - 출발지에서 데이터가 전송될 때 헤더가 추가되는데 2계층에서만 예외적으로 오류제어를 위해 꼬리부분에 추가된다.
  - 하위 계층으로 내려갈수록 PDU\*에는 다양한 프로토콜에 의해 헤더와 푸터가 더해진다. 물리 계층에서 PDU는 최종적인 모습으로 변하며, 데이터를 보내는 접점이 된다.
- **데이터 수신 시**
  - 1계층에서 7계층으로 헤더를 차근차근 벗겨내며 이를 디캡슐화 라고 한다.
  - 응용 계층에 도달하면 원본 데이터만 남는다.

_\*PDU: 프로토콜 데이터 단위이며, OSI 모델의 정보 처리 단위이다._

<br>

## 7계층
### **L1 물리계층(Physical Layer)**

- 7계층 중 최하위 계층이다.
- 주로 전기적, 기계적, 기능적인 특성을 이용해 데이터를 전송한다.
- 데이터는 0과 1의 비트열, 즉 On, Off의 전기적 신호 상태로 이루어져 해당 계층은 단지 데이터를 전달하는데에 초점이 맞춰져 있다.
- 단지 데이터 전달의 역할을 할 뿐 알고리즘, 오류제어 기능은 없다.

- **장비**
케이블, 허브, 탭, 리피터

<br>

### **L2 데이터링크 계층(Data-Link Layer)**

- 물리적인 연결을 통하여 인접한 두 장치 간의 신뢰성 있는 정보 전송을 담당(Point-To-Point\* 전송)
- 전기 신호를 모아 사람이 알아볼 수 있는 데이터 형태로 처리하므로, 데이터에 대한 오류를 감지할 수 있다. 만약 오류가 발생했다면 물리 계층으로 재전송하여 오류를 해결한다.
- 데이터 링크 계층에서 데이터 단위는 `프레임(Frame)`이다.
- 물리적 주소인 MAC 주소\*가 프레임 헤더에 추가된다.

_\* Point-To-Point: 컴퓨터 한 대가 다른 한 대의 컴퓨터에만 데이터를 보내는 방식_
_\*MAC주소: xx : xx : xx : xx : xx : xx 의 형식으로 총 6바이트로 전 세계에서 유일한 주소이다._

- **장비**
스위치, 브릿지

#### 프레임
상위 계층에서 보낸 전송 데이터에 오류 확인을 위한 체크섬, 송수신 호스트의 주소, 기타 프로토콜에서 사용하는 제어 코드 등의 정보가 포함된다.

<img width="754px" alt="Frame" src="https://velog.velcdn.com/images/wlsdnjs156/post/2cbd6b57-207c-4362-b802-aef87743b4f7/image.JPG">

<br>

## **L3 네트워크 계층(Network Layer)**

- 라우팅\* 기능을 맡고 있는 계층으로 목적지까지 가장 안전하고 빠르게 데이터를 보내는 기능을 가지고 있다. 즉, 최적 경로를 설정 가능하다.
- 논리적 주소인 IP 주소가 정의된다. (데이터 통신을 할 때 MAC 주소와 IP 주소가 사용된다.)
- 네트워크 계층에서 데이터 단위는 `패킷(Packet)`이다.
- 패킷 헤더에 IP 주소가 추가된다. IP 주소는 데이터를 목적지로 라우팅하는 데 사용된다.

_\*라우팅: 네트워크에서 경로를 선택하는 프로세스이다._

- **프로토콜**
IP, 라우팅 프로토콜
- **장비**
라우터, 스위치

<br>

## **L4 전송 계층(Transport Layer)**

- 종단 간 신뢰성 있고 정확한 데이터 전송을 담당한다.
- 송신자와 수신자 간의 신뢰성있고 효율적인 데이터를 전송하기 위하여 오류 검출 및 복구, 흐름 제어와 중복 검사 등을 수행한다.
  <!-- - 데이터링크 계층과 유사하게 오류 제어, 흐름 제어 등을 제공하지만, 데이터링크 계층은 물리적으로 1:1 연결된 호스트 사이의 전송을 의미하고 전송계층은 논리적으로(네트워크 상에서) 1:1 연결된 호스트 사이의 전송을 의미한다. -->
- 전송 계층에서 데이터 단위는 `세그먼트(Segment)`이다.
- 세그먼트 헤더에 포트 번호(Port Number)가 추가된다.

- **프로토콜**
TCP, UDP
- **장비**
로드 밸런서, 방화벽

<br>

## **L5 세션 계층(Session Layer)**

- 통신 장치 간 상호 작용 및 동기화를 제공한다.
- 세션 관리를 한다. 연결된 세션에서 데이터 교환과 에러 발생 시의 복구와 재전송를 관리한다.
  - <동기 기능>  
    통신 양단 끼리 서로 동의하는 논리적인 공통 시점인 동기점을 만들어 메시지가 제대로 처리가 되고 있는지를 파악한다.
    동기점은 오류 복구를 위하여 필수적으로 사용되는데 동기점 설정 이전까지는 서로 처리가 완료되었음을 합의하는 것을 의미한다. ( 동기점 이전 과정은 복구 X | 동기점 이후 처리과정에 대한 복구 O)
  - <대화 기능>  
    쉽게 데이터 전송 과정을 의미한다.
    시간 경과에 따른 순차적으로 동기점을 부여하여 신뢰성 보장 기능을 단계적으로 구현할 수 있게되어 일시정지 후 나중에 이어서 작업을 진행할 수 있다.
- 세션 계층의 단위는 `DATA` 이다.

- **프로토콜**
RPC, RTCP, SSH

<br>

## **L6 표현 계층(Presentation Layer)**

- 데이터를 어떻게 표현할지 정하는 역할을 하는 계층이다.
- 표현 계층은 3가지 기능을 갖고 있다.
  1.  송신자에서 온 데이터를 해석하기 위해 응용 계층 데이터를 부호화, 변화 시킨다.
  2.  수신자에서 데이터의 압축을 풀 수 있는 방식으로 된 데이터 압축한다.
  3.  데이터의 암호화와 복호화한다.  
      (MIME 인코딩이나 암호화 등의 동작이 표현계층에서 이루어짐. EBCDIC로 인코딩된 파일을 ASCII 로 인코딩된 파일로 바꿔주는 것이 한가지 예임)
      
- **프로토콜**
TLS, SSH
<br>

## **L7 응용 계층(Application Layer)**

- 사용자와 가장 밀접한 계층으로 인터페이스 역할을 한다.
- 응용 프로세스 간의 정보 교환을 담당한다.  
  ex) 전자메일, 인터넷, 동영상 플레이어 등

- **프로토콜**
HTTP, SMTP, STUN, FTP, TELNET

<br>

## 대표 기능 정리
|--|대표 기능|
|물리 계층|전송 매체, 데이터 속도, 물리적 연결 형태 등을 다룸|
|데이터 링크 계층|물리적 1대 1통신으로 프레임 단위로 물리 계층의 물리적 전송 오류 문제를 해결|
|네트워크 계층|데이터의 전송 경로를 결정(라우팅)한다. (IP)|
|전송 계층|송수신 프로세스 사이의 단대단 통신 기능을 지원(TCP, UDP)|
|세션 계층|송수신자 사이에 상위적 연결 개념인 세션을 지원|
|표현 계층|데이터의 의미와 표현 방법을 처리하며 암호화 압축 기능도 처리|
|응용 계층|HTTP, FTP, TeInet, email 등 다양한 인터넷 서비스 지원|

## 주요 프로토콜 및 장비
<img width="754px" src="https://velog.velcdn.com/images/jsb100800/post/eff03fb6-ce85-4e8d-ab83-a3f049e89e43/image.png" alt="Protocol">


---

## Reference

▶️ [우아한 Tech - 10분 테코톡 영상 추천] https://www.youtube.com/watch?v=1pfTxp25MA8&t=1912s

📄https://velog.io/@cgotjh/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-OSI-7-%EA%B3%84%EC%B8%B5-OSI-7-LAYER-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90-%EA%B0%81-%EA%B3%84%EC%B8%B5-%EC%84%A4%EB%AA%85  
📄https://onecoin-life.com/19