# SQL vs NoSQL
취업 공고를 보면 SQL, NoSQL 관련 경험을 우대해준다거나 면접때 사용경험을 물어보는 경우가 있다.  
이때 사용되는 SQL, NoSQL들이 뭐하는 친구들인지 알아보자!

**개요**
- SQL은 Structured Query Language의 약자로, 그 자체가 DB가 아니다.
- SQL은 관계형 데이터베이스 관리 시스템(RDBMS : relational database management system)의 데이터를 관리하기 위해 설계된 특수 목적의 프로그래밍 언어라고 위키백과는 설명한다.
- 예전부터 DB는 SQL로 만들어졌기 때문에 SQL이 관계형 DB라는 의미로 사용되는 것이라 추측된다.
- SQL DB, NoSQL DB라고 표현해야 정확하지만 아래 정리되는 내용에는 SQL, NoSQL로 언급한다.

## **SQL (관계형 데이터베이스)**  
SQL은 '구조화된 쿼리 언어(Structured Query Language)'의 약자이다.  
SQL을 사용하면 관계형 데이터베이스 관리 시스템(RDBMS)에서 데이터를 저장, 수정, 삭제 및 검색할 수 있다.  
이러한 관계형 데이터베이스의 데이터는 정해진 데이터 스키마를 따라 데이터베이스 테이블에 저장되며, 관계를 통해 연결된 여러 개의 테이블에 데이터가 분산되는 특징이 있다. 

**엄격한 스키마**  
데이터는 테이블(table)에 Rows로 저장되며, 각 테이블에는 명확하게 정의된 구조(structure)가 있다.  
구조(structure)는 컬럼의 이름과 데이터 유형으로 정의된다.  
관계형 데이터베이스에서 스키마를 준수하지 않는 Row는 추가할 수 없다. 

<img width="735" alt="스크린샷 2022-12-22 오후 11 46 02" src="https://user-images.githubusercontent.com/70997596/209167010-9e7d6642-2e59-4699-8975-906f165c7a75.png">

**관계**  
SQL 기반의 데이터베이스의 또 다른 중요한 부분이다.  
데이터들을 여러 개의 테이블에 나눠서 데이터들의 중복을 피할 수 있다.  
테이블을 나눠서 데이터를 저장하면, 테이블에서 중복 없이 하나의 데이터만을 관리하기 때문에, 다른 테이블에서 부정확한 데이터를 다룰 위험이 없다는 특징이 있다.

<img width="746" alt="스크린샷 2022-12-22 오후 11 58 13" src="https://user-images.githubusercontent.com/70997596/209167045-dc7738e6-2ad3-494a-bc47-529b6f5f3fa1.png">


## **NoSQL (비 관계형 데이터베이스)**
관계형 데이터베이스도 한계점을 노출하게 되었으며 이로 인해 새로운 데이터베이스인 NoSQL이 탄생하게 되었다.  
NoSQL은 기본적으로 SQL(관계형)와 반대되는 접근방식을 따르기 때문에 지어진 이름이다.

**NoSQL의 종류**  
NoSQL 데이터베이스의 종류는 키-값 데이터베이스, 도큐먼트 데이터베이스, 그래프 데이터베이스 등으로 나뉜다.  
**키-값 데이터 베이스** 는 키와 값으로 구성된 배열구조의 데이터베이스로 NoSQL 데이터베이스 중 가장 단순한 구조다.  
**도큐먼트 데이터베이스** 는 필드와 값의 형태로 구성된 데이터를 JSON 포맷으로 관리하는 데이터베이스로 NoSQL 데이터베이스 중 가장 인기가 높다.  
**그래프 데이터베이스** 는 노드와 관계로 구성된 데이터베이스로 근접한 객체를 모델링할 목적으로 설계되었다. 

<img width="737" alt="스크린샷 2022-12-22 오후 11 57 58" src="https://user-images.githubusercontent.com/70997596/209167086-0ee633fc-c170-4ce1-9965-11ccbd291568.png">


**NoSQL의 특징**  
- 유연성 : 스키머 선언 없이 필드의 추가 및 삭제가 자유로운 Schema-less 구조다.
- 확장성 : 스케일 아웃에 의한 서버 확장이 용이하다.
- 고성능 : 대용량 데이터를 처리하는 성능이 뛰어나다.
- 가용성 : 여러 대의 백업 서버 구성이 가능하여 장애 발생 시에도 무중단 서비스가 가능하다.

## **Scaling 수직적, 수평적 확장**
각각의 데이터베이스가 사용하는 확장 방법에 대해서 알아보자  
데이터베이스 서버의 성능을 확장하는(CPU 업그레이드 등) **수직적 확장** 이 있고,   
더 많은 서버가 추가되고 데이터베이스를 분산하는 **수평적 확장** 이 있다.  

데이터가 저장되는 방식 때문에 **관계형 데이터베이스** 는 일반적으로 **수직적 확장** 만을 지원한다.  
**수평적 확장** 은 **NoSQL 데이터베이스** 에서만 가능하다.  
관계형 데이터베이스에서는 같은 테이블 스키마를 가진 데이터를 다수의 데이터베이스에 분산하여 저장하는 방식인 '샤딩(Sharding)'을 활용해서 데이터를 저장해서 활용할 수 있지만 구현하기가 대체로 어려운 반면에, NoSQL 데이터베이스는 이를 기본적으로 지원하므로 여러 서버에서 데이터베이스를 쉽게 분리할 수 있다. 


## **그럼 어떤걸 써야 할까요?**
어떤 데이터베이스를 사용해야 할까? 이 질문에 확실한 정답은 없다. SQL과 NoSQL은 모두 훌륭한 솔루션이고 두 가지 중 하나의 솔루션을 선택해야 되는 문제에서는 어떤 데이터를 다루는지, 어떤 애플리케이션에서 사용되는지 고려해야한다.

**SQL의 장점**
- 명확하게 정의 된 스키마, 데이터 무결성 보장
- 관계는 각 데이터를 중복없이 한번만 저장된다. 

**NoSQL의 장점**  
- 스키마가 없기때문에, 훨씬 더 유연하다. 언제든지 저장된 데이터를 조정하고 새로운 "필드"를 추가 할 수 있습니다.
- 데이터는 애플리케이션이 필요로 하는 형식으로 저장된다. 이렇게 하면 데이터를 읽어오는 속도가 빨라진다.
- 수직 및 수평 확장이 가능하므로 데이터베이스가 애플리케이션에서 발생시키는 모든 읽기 / 쓰기 요청을 처리 할 수 있다.

**SQL의 단점**  
- 상대적으로 덜 유연하다. 데이터 스키마는 사전에 계획되고 알려져야 한다. (나중에 수정하기가 번거롭거나 불가능할 수  있다.)
- 관계를 맺고 있기 때문에, JOIN문이 많은 매우 복잡한 쿼리가 만들어 질 수 있다.
- 수평적 확장이 어렵고, 대체로 수직적 확장만 가능하다. 특정 시점에서 (처리 할 수 있는 처리량과 관련하여) 성장 한계에 직면하게 됩니다.

**NoSQL의 단점**  
- 유연성 때문에, 데이터 구조 결정을 하지 못하고 미루게 될 수 있다.
- 데이터 중복은 여러 컬렉션과 문서가 (SQL 세계에서 처럼 하나의 테이블에 하나의 레코드가 아니라) 여러 개의 레코드가 변경된 경우 업데이트를 해야 힌다.
- 데이터가 여러 컬렉션에 중복되어 있기 때문에, 수정(update)를 해야 하는 경우 모든 컬렉션에서 수행해야 한다. (SQL 세계에서는 중복된 데이터가 없기 때문에 한번만 수행하면 된다.)

**SQL을 사용하기 좋은 경우**  
- 관계를 맺고 있는 데이터가 자주 변경(수정)되는 애플리케이션일 경우   
- 변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우

**NoSQL을 사용하기 좋은 경우**
- 정확한 데이터 구조를 알 수 없거나 변경, 확장 될 수 있는 경우  
- 읽기(read)처리를 자주하지만, 데이터를 자주 변경(update)하지 않는 경우 (한번의 변경으로 여러 문서를 업데이트 할 필요가 없는 경우)  
- 데이터베이스를 수평으로 확장해야 하는 경우 (막대한 양의 데이터를 다뤄야 하는 경우)

## 출처
https://velog.io/@thms200/SQL-vs-NoSQL  
https://academind.com/tutorials/sql-vs-nosql  
https://siyoon210.tistory.com/130  
